<?xml version="1.0"?>

<project name="portlet" basedir="." default="deploy">
	<import file="../build-common-portlet.xml" />

	<property name="wsrp.file" value="wsrp.zip" />

	<target name="clean" depends="build-common-plugin.clean">
		<delete dir="docroot/wsrp" />
	</target>

	<target name="war" depends="compile">
		<antcall target="build-wsrp" />

		<antcall target="build-common-plugin.war" />
	</target>

	<target name="build-wsrp">
		<if>
			<not>
				<uptodate
					srcfile="third-party/${wsrp.file}"
					targetfile="docroot/wsrp"
				/>
			</not>
			<then>
				<delete dir="docroot/wsrp" />

				<unzip src="third-party/${wsrp.file}" dest="docroot/wsrp" />
			</then>
		</if>
	</target>
</project>