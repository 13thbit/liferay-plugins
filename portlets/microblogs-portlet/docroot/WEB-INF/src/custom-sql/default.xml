<?xml version="1.0"?>

<custom-sql>
	<sql id="com.liferay.microblogs.service.persistence.MicroblogsEntryFinder.countByC_U_T_RU_RE_S_V">
		<![CDATA[
			SELECT
				COUNT(*) AS COUNT_VALUE
			FROM
				Microblogs_MicroblogsEntry
			LEFT JOIN
				SocialRelation ON
					(Microblogs_MicroblogsEntry.receiverUserId = SocialRelation.UserId2) AND
					(Microblogs_MicroblogsEntry.socialRelationType = SocialRelation.type_)
			WHERE
			(
				(Microblogs_MicroblogsEntry.socialRelationType = ?) OR
				(Microblogs_MicroblogsEntry.userId = ?) OR
				(
					(Microblogs_MicroblogsEntry.socialRelationType = socialRelation.type_) AND
					(socialRelation.userId1 = ?)
				)
			)
		]]>
	</sql>
	<sql id="com.liferay.microblogs.service.persistence.MicroblogsEntryFinder.countByT_V">
		<![CDATA[
			SELECT
				COUNT(*) AS COUNT_VALUE
			FROM
				Microblogs_MicroblogsEntry
			LEFT JOIN
				SocialRelation ON
					(Microblogs_MicroblogsEntry.receiverUserId = SocialRelation.UserId2) AND
					(Microblogs_MicroblogsEntry.socialRelationType = SocialRelation.type_)
			INNER JOIN
				AssetEntry ON
					(AssetEntry.classPK = Microblogs_MicroblogsEntry.microblogsEntryId)
			INNER JOIN 
				AssetEntries_AssetTags ON
					(AssetEntries_AssetTags.entryId = AssetEntry.entryId)
			INNER JOIN
				AssetTag ON
					(AssetTag.tagId = AssetEntries_AssetTags.tagId)
			WHERE
			(
				(Microblogs_MicroblogsEntry.socialRelationType = ?) OR
				(Microblogs_MicroblogsEntry.userId = ?) OR
				(
					(Microblogs_MicroblogsEntry.socialRelationType = socialRelation.type_) AND
					(socialRelation.userId1 = ?)
				)
			)
		]]>
	</sql>
	<sql id="com.liferay.microblogs.service.persistence.MicroblogsEntryFinder.findByC_U_T_RU_RE_S_V">
		<![CDATA[
			SELECT
				*
			FROM
				Microblogs_MicroblogsEntry
			LEFT JOIN
				SocialRelation ON
					(Microblogs_MicroblogsEntry.receiverUserId = SocialRelation.UserId2) AND
					(Microblogs_MicroblogsEntry.socialRelationType = SocialRelation.type_)
			WHERE
			(
				(Microblogs_MicroblogsEntry.socialRelationType = ?) OR
				(Microblogs_MicroblogsEntry.userId = ?) OR
				(
					(Microblogs_MicroblogsEntry.socialRelationType = SocialRelation.type_) AND
					(socialRelation.userId1 = ?)
				)
			)
		]]>
	</sql>
	<sql id="com.liferay.microblogs.service.persistence.MicroblogsEntryFinder.findByT_V">
		<![CDATA[
			SELECT
				*
			FROM
				Microblogs_MicroblogsEntry
			LEFT JOIN
				SocialRelation ON
					(Microblogs_MicroblogsEntry.receiverUserId = SocialRelation.UserId2) AND
					(Microblogs_MicroblogsEntry.socialRelationType = SocialRelation.type_)
			INNER JOIN
				AssetEntry ON
					(AssetEntry.classPK = Microblogs_MicroblogsEntry.microblogsEntryId)
			INNER JOIN 
				AssetEntries_AssetTags ON
					(AssetEntries_AssetTags.entryId = AssetEntry.entryId)
			INNER JOIN
				AssetTag ON
					(AssetTag.tagId = AssetEntries_AssetTags.tagId)
			WHERE
			(
				(Microblogs_MicroblogsEntry.socialRelationType = ?) OR
				(Microblogs_MicroblogsEntry.userId = ?) OR
				(
					(Microblogs_MicroblogsEntry.socialRelationType = SocialRelation.type_) AND
					(socialRelation.userId1 = ?)
				)
			)
		]]>
	</sql>
</custom-sql>