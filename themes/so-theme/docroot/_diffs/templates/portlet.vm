#set ($portlet_display = $portletDisplay)

#set ($portlet_id = $htmlUtil.escape($portlet_display.getId()))
#set ($portlet_title = $portlet_display.getTitle())
#set ($portlet_content = $portlet_display.getContent())
#set ($portlet_back_url = $htmlUtil.escape($portlet_display.getURLBack()))

#set ($portlets_configurable = ["39_INSTANCE_abcd", "1_WAR_wysiwygportlet"])
#set ($portlets_editable = ["1_WAR_weatherportlet"])

<div class="portlet" id="portlet-wrapper-$portlet_id">
	<div class="portlet-topper">
		<span class="portlet-title not-editable">
			$portlet_title
		</span>

		<div class="portlet-icons" id="portlet-small-icon-bar_$portlet_id">
			#if ($portlet_display.isShowBackIcon())
				<a href="$portlet_back_url" class="portlet-icon-back">#language ("return-to-full-page")</a>
			#else
				$theme.iconOptions()
				$theme.iconMinimize()
				$theme.iconMaximize()
				$theme.iconClose()
			#end
		</div>
	</div>

	<div class="portlet-content">
		#set ($portlet_configuration_url = "")

		#if ($permissionChecker.isCommunityAdmin($themeDisplay.getScopeGroupId()))
			#if ($portlets_configurable.contains($portlet_id))
				#set ($portlet_configuration_url = $portlet_display.getURLConfiguration())
			#elseif ($portlets_editable.contains($portlet_id))
				#set ($portlet_configuration_url = $portlet_display.getURLEdit())
			#end
		#end

		#if ($validator.isNotNull($portlet_configuration_url))
			<div class="so-portlet-configuration">
				<a href="$portlet_configuration_url">$themeDisplay.translate("configure")</a>
			</div>
		#end

		$portlet_content
	</div>
</div>