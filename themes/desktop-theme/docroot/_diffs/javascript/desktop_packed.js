var Desktop=function(){var A=jQuery;return{initHtml:function(){var B=this;if(!A("#content-wrapper").hasClass("freeform")){jQuery("html").css({overflow:"auto"})}},initPage:function(){var B=this;var C=A("#sidebar-container");var D=A("#sidebar-link");if((C.size()>0)&&(D.size()==0)){var E="";E+="<div id=\"sidebar-link\">";E+="\t<a href=\"javascript: Sidebar.animate();\"></a>";E+="</div>";C.prepend(E).css({display:""});Sidebar.toggle("87",false)}if(A("#content-wrapper").is(".freeform")){A("body").click(function(F){B.tbDeselect(F)})}},tbAddLink:function(F){var J=this;if(A("#tb_"+F).size()==0){var I=A("#p_p_id_"+F+"_");var D=I.find("span.icon-close");var B="";if(I.hasClass("portlet-minimized")){I.css({display:"none"}).removeClass("portlet-minimized");B="javascript: Desktop.portletRestore('"+F+"');"}else{B="javascript: Desktop.portletMinimize('"+F+"');"}if(D.size()==0){B="#"}var H=A.trim(I.find("span.portlet-title").text());if(H!=""){var C="";C+="<li id=\"tb_"+F+"\" class=\"taskbar-link\">";C+="\t<a href=\""+B+"\">";C+="\t\t<span class=\"taskbar-link-title\">";C+=H;C+="\t\t</span>";C+="\t</a>";C+="</li>";A("#taskbar-portlets").append(C);var G=A("#taskbar-portlets .taskbar-link");var E=G.size();G.css({width:100/E+"%"})}if(A("#content-wrapper").is(".freeform")){I.click(function(){J.portletRestore(F)})}}},tbDeselect:function(D){var C=this;var B=A(D.target);if(B.is("#wrapper")){A(".taskbar-link.selected").removeClass("selected")}},tbSelectLink:function(D){var B=this;var E=A(".taskbar-link.selected");var C=A("#tb_"+D);E.removeClass("selected");C.addClass("selected")},portletMaximize:function(D){var C=this;var E=0;A(window).load(function(){if(A("html").is(".ie6")){E=document.documentElement.offsetHeight-4}else{if(A("html").is(".ie")){E=document.body.offsetHeight}else{E=window.innerHeight}}A("#portlet-wrapper-"+D+" .middle-center").css({height:E-68+"px"})});if(A("html").is(".ie")){var B=null;A(window).resize(function(){if(B){clearTimeout(B)}B=setTimeout(function(){if(A("html").is(".ie6")){E=document.documentElement.offsetHeight-4}else{E=document.body.offsetHeight}A("#portlet-wrapper-"+D+" .middle-center").css({height:E-68+"px"})},100)})}else{A(window).resize(function(){A("#portlet-wrapper-"+D+" .middle-center").css({height:window.innerHeight-68+"px"})})}},portletMinimize:function(C){var B=this;var D=A("#tb_"+C+" a").attr("href");D=D.replace("portletMinimize","portletRestore");A("#tb_"+C+" a").attr("href",D);A("#p_p_id_"+C+"_").css({display:"none"});jQuery.ajax({url:themeDisplay.getPathMain()+"/portal/update_layout",data:{p_l_id:themeDisplay.getPlid(),p_p_id:C,p_p_restore:false,doAsUserId:themeDisplay.getDoAsUserIdEncoded(),cmd:"minimize"}})},portletRemove:function(D,C){var B=this;A("#tb_"+D).remove();var E=A("#taskbar-portlets .taskbar-link").size()-1;if(E<1){E=1}A("#taskbar-portlets .taskbar-link").css({width:100/E+"%"});jQuery(function(){var F=jQuery("#p_p_id_"+D+"_");F.portletProcessed=true;F.portletId=D;F.columnPos=C;Liferay.Portlet.close(F,true)})},portletRestore:function(D){var B=this;var H=A("#tb_"+D+" a").attr("href");H=H.replace("portletRestore","portletMinimize");A("#tb_"+D+" a").attr("href",H);var G=A("#p_p_id_"+D+"_");var F=G.parent().attr("id");if(A("#content-wrapper").is(".freeform")){G.appendTo("#"+F);G.css({display:""})}else{G.css({display:""})}var E="tb_"+D;var C=A(".taskbar-link.selected").attr("id");if((E!=C)&&A("#content-wrapper").is(".freeform")){B.tbSelectLink(D)}jQuery.ajax({url:themeDisplay.getPathMain()+"/portal/update_layout",data:{p_l_id:themeDisplay.getPlid(),p_p_id:D,p_p_restore:true,doAsUserId:themeDisplay.getDoAsUserIdEncoded(),cmd:"minimize"}})}}}()