var Desktop=function(){var A=jQuery;return{initHtml:function(){var B=this;if(!A("#content-wrapper").hasClass("freeform")){jQuery("html").css({overflow:"auto"})}},initPage:function(){var B=this;var C=A("#sidebar-container");var D=A("#sidebar-link");if((C.size()>0)&&(D.size()==0)){var E="";E+="<div id=\"sidebar-link\">";E+="\t<a href=\"javascript: Sidebar.animate();\"></a>";E+="</div>";C.prepend(E).css({display:""});Sidebar.toggle("87",false)}if(A("#content-wrapper").is(".freeform")){A("body").click(function(F){B.tbDeselect(F)})}},tbAddLink:function(G){var J=this;if(A("#tb_"+G).size()==0){var I=A("#p_p_id_"+G+"_");var D=I.find("span.icon-close");var B="";if(I.hasClass("portlet-minimized")){I.css({display:"none"}).removeClass("portlet-minimized");B="javascript: Desktop.portletRestore('"+G+"');"}else{B="javascript: Desktop.portletMinimize('"+G+"');"}if(D.size()==0){B="#"}var C="";C+="<li id=\"tb_"+G+"\" class=\"taskbar-link\">";C+="\t<a href=\""+B+"\">";C+="\t\t<span class=\"taskbar-link-title\">";C+=A.trim(I.find("span.portlet-title").text());C+="\t\t</span>";C+="\t</a>";C+="</li>";A("#taskbar-portlets").append(C);var H=A("#taskbar-portlets .taskbar-link");var E=A("#taskbar-portlets-wrapper").width()-52-10;var F=H.size();if(F*200<E){H.css({width:"200px"})}else{H.css({width:100/F+"%"})}if(A("#content-wrapper").is(".freeform")){I.click(function(){J.portletRestore(G)})}}},tbDeselect:function(D){var C=this;var B=A(D.target);if(B.is("#wrapper")){A(".taskbar-link.selected").removeClass("selected")}},tbSelectLink:function(D){var B=this;var E=A(".taskbar-link.selected");var C=A("#tb_"+D);E.removeClass("selected");C.addClass("selected")},portletMaximize:function(D){var C=this;var E=0;A(window).load(function(){if(A("html").is(".ie6")){E=document.documentElement.offsetHeight-4}else{if(A("html").is(".ie")){E=document.body.offsetHeight}else{E=window.innerHeight}}A("#portlet-wrapper-"+D+" .middle-center").css({height:E-68+"px"})});if(A("html").is(".ie")){var B=null;A(window).resize(function(){if(B){clearTimeout(B)}B=setTimeout(function(){if(A("html").is(".ie6")){E=document.documentElement.offsetHeight-4}else{E=document.body.offsetHeight}A("#portlet-wrapper-"+D+" .middle-center").css({height:E-68+"px"})},100)})}else{A(window).resize(function(){A("#portlet-wrapper-"+D+" .middle-center").css({height:window.innerHeight-68+"px"})})}},portletMinimize:function(C){var B=this;var D=A("#tb_"+C+" a").attr("href");D=D.replace("portletMinimize","portletRestore");A("#tb_"+C+" a").attr("href",D);A("#p_p_id_"+C+"_").css({display:"none"});jQuery.ajax({url:themeDisplay.getPathMain()+"/portal/update_layout",data:{p_l_id:themeDisplay.getPlid(),p_p_id:C,p_p_restore:false,doAsUserId:themeDisplay.getDoAsUserIdEncoded(),cmd:"minimize"}})},portletRemove:function(E,D){var C=this;A("#tb_"+E).remove();var F=A("#taskbar-portlets .taskbar-link").size()-1;if(F<1){F=1}var G=A("#taskbar-portlets .taskbar-link");var B=A("#taskbar-portlets-wrapper").width()-52-10;if(F*200<B){G.css({width:"200px"})}else{G.css({width:100/F+"%"})}jQuery(function(){var H=jQuery("#p_p_id_"+E+"_");H.portletProcessed=true;H.portletId=E;H.columnPos=D;Liferay.Portlet.close(H,true)})},portletRestore:function(D){var B=this;var H=A("#tb_"+D+" a").attr("href");H=H.replace("portletRestore","portletMinimize");A("#tb_"+D+" a").attr("href",H);var G=A("#p_p_id_"+D+"_");var F=G.parent().attr("id");if(A("#content-wrapper").is(".freeform")){G.appendTo("#"+F);G.css({display:""})}else{G.css({display:""})}var E="tb_"+D;var C=A(".taskbar-link.selected").attr("id");if((E!=C)&&A("#content-wrapper").is(".freeform")){B.tbSelectLink(D)}jQuery.ajax({url:themeDisplay.getPathMain()+"/portal/update_layout",data:{p_l_id:themeDisplay.getPlid(),p_p_id:D,p_p_restore:true,doAsUserId:themeDisplay.getDoAsUserIdEncoded(),cmd:"minimize"}})}}}()